{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabaq Saqshy</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <link rel="stylesheet" href="{% static 'bilimClassApp/css/base.css' %}">
    <link rel="stylesheet" href="{% static 'bilimClassApp/css/admin_panel.css' %}">
    {% block head_extra %}{% endblock %}
</head>
<body>
    
    <div class="container">
        <header class="site-header">
            <div class="logo-section">
                <div class="logo-icon">üéì</div>
                <div class="logo-text">
                    <h1>Sabaq Saqshy</h1>
                    <span>–û“õ—ã—Ç—É –ø—Ä–æ—Ü–µ—Å—ñ–Ω –±–∞—Å“õ–∞—Ä—É –∂“Ø–π–µ—Å—ñ</span>
                </div>
            </div>
            {% if  user.profile.role == 'headteacher' %}
            <div class="td-user-section">
                <div class="td-user-info">
                    <a href="{% url 'profile' %}" class="td-user-link">
                        <h3>{{ user.get_full_name }}</h3>
                    </a>
                    <a href="{% url 'logout' %}" class="logout-link" style="font-size: 14px; color: #6B7280;" title="–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞">
                        –®—ã“ì—É
                    </a>
                </div>
                <a href="{% url 'profile' %}" class="td-user-link">
                    <div class="td-user-avatar">{{ user.first_name|first }}{{ user.last_name|first }}</div>
                </a>
            </div>
            {% else %}
            <div class="user-section">
                {% if user.is_authenticated %}
                <div class="user-profile">
                    <div class="user-info">
                        <p>{{ user.get_full_name|default:user.username }}</p>
                        {# –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ #}
                        <span>{% if user.profile %}{{ user.profile.get_role_display }}{% endif %}</span>
                    </div>
                    <div class="user-avatar">{{ user.first_name|first }}{{ user.last_name|first }}</div>
                </div>
                {% endif %}
            </div>
            {% endif %}
        </header>

        <!-- –≠–¢–ê –ü–ê–ù–ï–õ–¨ –ë–£–î–ï–¢ –í–ò–î–ù–ê –¢–û–õ–¨–ö–û –ù–ê –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í–ê–• -->
        <div class="td-mobile-nav">
            <h2 id="mobile-nav-title">–ì–ª–∞–≤–Ω–∞—è</h2>
            <button id="mobile-menu-btn" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        

        <main id="app-content">
            <nav class="td-main-nav">
                <!-- –≠–¢–£ –®–ê–ü–ö–£ –ù–£–ñ–ù–û –î–û–ë–ê–í–ò–¢–¨ –í–ù–£–¢–†–¨ –ú–ï–ù–Æ -->
                <div class="mobile-menu-header">
                    <h3>–ú–µ–Ω—é</h3>
                    <button id="mobile-menu-close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <ul>
                    {# === –ù–ê–ß–ê–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø: –í—Å—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è —Ä–æ–ª–µ–π –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ –ø—Ä–æ–≤–µ—Ä–∫—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ === #}
                    {% if user.is_authenticated %}
                        
                        {% if user.is_staff %}
                            <li><a href="{% url 'admin_panel' %}" {% if request.resolver_match.url_name == 'admin_panel' %}class="active"{% endif %}><i class="fa-solid fa-users"></i> –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞</a></li>
                        {% endif %}
                        
                        <!-- –°—Å—ã–ª–∫–∏ –¥–ª—è –£—á–∏—Ç–µ–ª—è -->
                        {% if user.profile.role == 'teacher' %}
                            <li><a href="{% url 'teacher_dashboard' %}" {% if request.resolver_match.url_name == 'teacher_dashboard' %}class="active"{% endif %}><i class="fa-solid fa-house"></i> –ì–ª–∞–≤–Ω–∞—è</a></li>
                            <li><a href="{% url 'teacher_journal' %}" {% if request.resolver_match.url_name == 'teacher_journal' %}class="active"{% endif %}><i class="fa-solid fa-book-open-reader"></i> –ñ—É—Ä–Ω–∞–ª</a></li>
                            <li><a href="{% url 'teacher_homework' %}" {% if request.resolver_match.url_name == 'teacher_homework' %}class="active"{% endif %}><i class="fa-solid fa-person-chalkboard"></i> –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</a></li>
                        {% endif %}

                        <!-- –°—Å—ã–ª–∫–∏ –¥–ª—è –ó–∞–≤—É—á–∞ –∏ –ê–¥–º–∏–Ω–∞ -->
                        {% if  user.profile.role == 'headteacher' %}
                            {# === –ù–ê–ß–ê–õ–û –ò–ó–ú–ï–ù–ï–ù–ò–Ø === #}
                            <li>
                                <a href="{% url 'headteacher' %}" 
                                data-page="headteacher" data-tab="performance"
                                {% if request.resolver_match.url_name == 'headteacher' and request.GET.tab != 'plan-approval' and request.GET.tab != 'schedule' %}class="active"{% endif %}>
                                <i class="fa-solid fa-house"></i> –û“õ—É “Ø–ª–≥–µ—Ä—ñ–º—ñ
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'headteacher' %}?tab=plan-approval"
                                data-page="headteacher" data-tab="plan-approval"
                                {% if request.resolver_match.url_name == 'headteacher' and request.GET.tab == 'plan-approval' %}class="active"{% endif %}>
                                <i class="fa-solid fa-check-to-slot"></i> –ñ–æ—Å–ø–∞—Ä–ª–∞—Ä–¥—ã –º–∞“õ“±–ª–¥–∞—É
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'headteacher' %}?tab=schedule"
                                data-page="headteacher" data-tab="schedule"
                                {% if request.resolver_match.url_name == 'headteacher' and request.GET.tab == 'schedule' %}class="active"{% endif %}>
                                <i class="fa-solid fa-calendar-days"></i> –ú–µ–∫—Ç–µ–ø –∫–µ—Å—Ç–µ—Å—ñ
                                </a>
                            </li>
                            {# === –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–Ø === #}
                        {% endif %}

                        <li><a href="{% url 'profile' %}" {% if request.resolver_match.url_name == 'profile' %}class="active"{% endif %}><i class="fa-solid fa-user-gear"></i> –ü—Ä–æ—Ñ–∏–ª—å</a></li>
                        <li><a href="{% url 'logout' %}"><i class="fa-solid fa-right-from-bracket"></i>–®—ã“ì—É</a></li>

                    {% else %}
                        {# –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É, –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤—Ö–æ–¥ #}
                        <li><a href="{% url 'login' %}">–ö—ñ—Ä—É</a></li>
                    {% endif %}
                    {# === –ö–û–ù–ï–¶ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø === #}
                </ul>
            </nav>
            {% block content %}
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ -->
            {% endblock %}
        </main>
    </div>

    {% block modals %}{% endblock %}

    {% block scripts_extra %}{% endblock %}
</body>
</html>