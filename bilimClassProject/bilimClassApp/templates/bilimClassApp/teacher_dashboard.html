{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∞—à–±–æ—Ä–¥ –£—á–∏—Ç–µ–ª—è | –®–∫–æ–ª—å–Ω–∞—è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Font Awesome –¥–ª—è –∏–∫–æ–Ω–æ–∫ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        :root {
            --bg-main: #F9FAFB;
            --bg-widget: #FFFFFF;
            --text-primary: #111827;
            --text-secondary: #6B7280;
            --border-color: #E5E7EB;
            --accent-primary: #4F46E5;
            --accent-light: #EEF2FF;
            --accent-blue: #3B82F6;
            --accent-orange: #F97316;
            --accent-purple: #8B5CF6;
            --accent-red: #EF4444;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
        }

        .td-container { max-width: 1400px; margin: 0 auto; padding: 24px; }

        /* --- Header --- */
        .td-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .td-logo-section { display: flex; align-items: center; gap: 12px; }
        .td-logo-icon { width: 40px; height: 40px; background-color: var(--accent-primary); border-radius: 8px; color: white; display: grid; place-items: center; font-size: 20px; }
        .td-logo-section h1 { font-size: 18px; font-weight: 600; }
        .td-logo-section p { font-size: 14px; color: var(--text-secondary); }
        .td-user-section { display: flex; align-items: center; gap: 16px; }
        .td-user-info { text-align: right; }
        .td-user-info h3 { font-weight: 600; }
        .td-user-info p { font-size: 14px; color: var(--text-secondary); }
        .td-user-avatar { width: 40px; height: 40px; border-radius: 50%; background-color: #D8B4FE; color: #581C87; display: grid; place-items: center; font-weight: 600; }

        /* --- Main Grid Layout --- */
        .td-main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr; /* 2 —á–∞—Å—Ç–∏ –¥–ª—è –ª–µ–≤–æ–π, 1 –¥–ª—è –ø—Ä–∞–≤–æ–π */
            gap: 24px;
        }
        
        /* --- Main Navigation --- */
        .td-main-nav { background-color: var(--bg-widget); border: 1px solid var(--border-color); border-radius: 12px; padding: 8px; margin-bottom: 24px; }
        .td-main-nav ul { display: flex; list-style: none; justify-content: flex-start; gap: 8px; }
        .td-main-nav a {
            display: flex; align-items: center; gap: 8px; padding: 10px 16px;
            text-decoration: none; color: var(--text-secondary); font-weight: 600; border-radius: 8px; transition: all 0.2s;
        }
        .td-main-nav a:hover { background-color: #F3F4F6; color: var(--text-primary); }
        .td-main-nav a.active { background-color: var(--accent-light); color: var(--accent-primary); }

        /* --- General Card Style --- */
        .td-card { background-color: var(--bg-widget); border: 1px solid var(--border-color); border-radius: 12px; padding: 24px; }
        .td-card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
        .td-card-header i { color: var(--text-secondary); }
        .td-card-header h3 { font-size: 18px; font-weight: 600; }
        .td-card-subtitle { color: var(--text-secondary); margin-bottom: 20px; }

        /* --- Left Column --- */
        .td-stats-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
        .td-stat-card { padding: 20px; border-radius: 12px; color: white; }
        .td-stat-card i { font-size: 20px; margin-bottom: 12px; }
        .td-stat-card h2 { font-size: 28px; font-weight: 700; }
        .td-stat-card p { font-size: 14px; opacity: 0.9; }
        .blue { background-color: var(--accent-blue); }
        .orange { background-color: var(--accent-orange); }
        .purple { background-color: var(--accent-purple); }
        .red { background-color: var(--accent-red); }

        .td-schedule-list { display: flex; flex-direction: column; gap: 12px; }
        .td-lesson-item { display: flex; align-items: center; gap: 16px; padding: 16px; border-radius: 10px; background-color: #F9FAFB; }
        .td-lesson-item.current { background-color: var(--accent-light); border: 1px solid var(--accent-primary); }
        .td-lesson-time p { font-weight: 600; }
        .td-lesson-time span { font-size: 14px; color: var(--text-secondary); }
        .td-lesson-info { flex-grow: 1; }
        .td-lesson-info h4 { font-weight: 600; }
        .td-lesson-info p { font-size: 14px; color: var(--text-secondary); }
        .td-lesson-status { font-size: 12px; font-weight: 600; padding: 4px 10px; border-radius: 99px; }
        .completed { color: #374151; background-color: #F3F4F6; }
        .current-badge { color: var(--accent-primary); background-color: var(--accent-light); }
        .upcoming { color: var(--text-secondary); background-color: transparent; }

        /* --- Right Column --- */
        .td-right-column { display: flex; flex-direction: column; gap: 24px; }
        .td-task-list, .td-plan-list { display: flex; flex-direction: column; gap: 16px; }
        .td-task-item, .td-plan-item { padding-bottom: 16px; border-bottom: 1px solid var(--border-color); }
        .td-task-item:last-child, .td-plan-item:last-child { border: none; padding: 0; }
        .td-task-item p, .td-plan-item p { font-weight: 500; margin-bottom: 8px; }
        .td-task-meta { display: flex; align-items: center; justify-content: space-between; font-size: 12px; color: var(--text-secondary); }
        .td-task-badge { padding: 2px 8px; border-radius: 99px; font-weight: 600; }
        .urgent { background-color: #FEF2F2; color: #B91C1C; }
        .medium { background-color: #FFFBEB; color: #B45309; }
        .td-plan-item { display: flex; align-items: center; }
        .td-plan-item small { color: var(--text-secondary); margin-left: auto; }
        .td-plan-status { width: 24px; height: 24px; border-radius: 50%; display: grid; place-items: center; color: white; margin-left: 12px; font-size: 12px; }
        .approved { background-color: #10B981; }
        .pending { background-color: #F59E0B; }
        .rejected { background-color: #EF4444; }

    </style>
</head>
<body class="td-body">

<div class="td-container">
    <!-- ===== –•–ï–î–ï–† ===== -->
    <header class="td-header">
        <div class="td-logo-section">
            <div class="td-logo-icon">üéì</div>
            <div>
                <h1>–®–∫–æ–ª—å–Ω–∞—è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</h1>
                <p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–µ–±–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º</p>
            </div>
        </div>
        <div class="td-user-section">
            <div class="td-user-info">
                <h3>{{ teacher.user.get_full_name }}</h3>
                <p>–£—á–∏—Ç–µ–ª—å</p>
            </div>
            <div class="td-user-avatar">{{ teacher.user.first_name|first }}{{ teacher.user.last_name|first }}</div>
        </div>
    </header>

    <!-- ===== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ ===== -->
    <main class="td-main-grid">
        <!-- –õ–µ–≤–∞—è (–æ—Å–Ω–æ–≤–Ω–∞—è) –∫–æ–ª–æ–Ω–∫–∞ -->
        <div class="td-left-column">
            <!-- –¢–∞–±—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
            <nav class="td-main-nav">
                <ul>
                    <li><a href="{% url 'teacher_dashboard' %}" class="active"><i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="#"><i class="fas fa-tasks"></i> –ü–æ—É—Ä–æ—á–Ω—ã–µ –ø–ª–∞–Ω—ã</a></li>
                    <li><a href="{% url 'teacher_journal' %}"><i class="fas fa-book"></i> –ñ—É—Ä–Ω–∞–ª</a></li>
                    <li><a href="{% url 'teacher_homework' %}"><i class="fas fa-pencil-alt"></i> –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</a></li>
                    <li><a href="#"><i class="far fa-calendar-alt"></i> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a></li>
                </ul>
            </nav>

            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π -->
            <section class="td-stats-cards">
                <div class="td-stat-card blue">
                    <i class="fas fa-calendar-day"></i>
                    <h2>{{ lessons_today_count|default:0 }}</h2>
                    <p>–£—Ä–æ–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è</p>
                </div>
                <div class="td-stat-card orange">
                    <i class="fas fa-file-alt"></i>
                    <h2>{{ plans_to_check_count|default:0 }}</h2>
                    <p>–ü–ª–∞–Ω–æ–≤ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</p>
                </div>
                <div class="td-stat-card purple">
                    <i class="fas fa-book-reader"></i>
                    <h2>{{ homeworks_count|default:0 }}</h2>
                    <p>–î–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π</p>
                </div>
                <div class="td-stat-card red">
                    <i class="fas fa-exclamation-circle"></i>
                    <h2>{{ unchecked_works_count|default:0 }}</h2>
                    <p>–ù–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç</p>
                </div>
            </section>
            
            <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è -->
            <section class="td-card">
                <div class="td-card-header">
                    <i class="far fa-clock"></i>
                    <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                </div>
                <p class="td-card-subtitle">{{ today|date:"l, j F Y" }}</p>

                <div class="td-schedule-list">
                    {% for lesson in schedule_today %}
                    <div class="td-lesson-item">
                        <div class="td-lesson-time">
                            <p>{{ lesson.start_time|time:"H:i" }}</p>
                            <span>{{ lesson.end_time|time:"H:i" }}</span>
                        </div>
                        <div class="td-lesson-info">
                            <h4>{{ lesson.subject.name }}</h4>
                            <p>–ö–ª–∞—Å—Å {{ lesson.school_class.name }} ‚Ä¢ –ö–∞–±–∏–Ω–µ—Ç {{ lesson.classroom }}</p>
                        </div>
                        <span class="td-lesson-status upcoming">–ü—Ä–µ–¥—Å—Ç–æ–∏—Ç</span>
                    </div>
                    {% empty %}
                    <p class="td-empty-message" style="text-align: center; padding: 20px; color: var(--text-secondary);">–ù–∞ —Å–µ–≥–æ–¥–Ω—è —É—Ä–æ–∫–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –Ω–µ—Ç.</p>
                    {% endfor %}
                </div>
            </section>
        </div>
        
        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
        <div class="td-right-column">
            <!-- –í–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ -->
            <section class="td-card">
                <div class="td-card-header">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>–í–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏</h3>
                </div>
                <div class="td-task-list">
                    <div class="td-task-item">
                        <p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã 8–ê</p>
                        <div class="td-task-meta"><span class="td-task-badge urgent">–°—Ä–æ—á–Ω–æ</span> <span>2025-10-22</span></div>
                    </div>
                    <div class="td-task-item">
                        <p>–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω —É—Ä–æ–∫–∞ 9–ë</p>
                        <div class="td-task-meta"><span class="td-task-badge medium">–°—Ä–µ–¥–Ω–∏–π</span> <span>2025-10-23</span></div>
                    </div>
                </div>
            </section>
            
            <!-- –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–æ–≤ -->
            <section class="td-card">
                 <div class="td-card-header">
                    <i class="fas fa-check-double"></i>
                    <h3>–°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–æ–≤</h3>
                </div>
                 <div class="td-plan-list">
                    <div class="td-plan-item">
                        <p>–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è <small>(8–ê)</small></p>
                        <div class="td-plan-status approved"><i class="fas fa-check"></i></div>
                    </div>
                    <div class="td-plan-item">
                        <p>–¢–µ–æ—Ä–µ–º–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞ <small>(9–ë)</small></p>
                        <div class="td-plan-status pending"><i class="far fa-clock"></i></div>
                    </div>
                     <div class="td-plan-item">
                        <p>–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ <small>(11–ê)</small></p>
                        <div class="td-plan-status rejected"><i class="fas fa-times"></i></div>
                    </div>
                 </div>
            </section>
        </div>
    </main>
</div>

</body>
</html>